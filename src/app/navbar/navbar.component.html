<nav class="navbar-modern">
  <div class="navbar-container">
    <!-- Logo y marca -->
    <a routerLink="" class="navbar-brand">
      <img
        class="brand-logo"
        src="assets/images/logonuevo.png"
        alt="CinemaLand Logo"
      />
    </a>

    <!-- Botón mobile toggle -->
    <button
      class="mobile-toggle"
      [class.active]="mobileMenuOpen"
      (click)="toggleMobileMenu()"
      aria-label="Toggle navigation"
    >
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>

    <!-- Navegación principal -->
    <div class="navbar-nav" [class.active]="mobileMenuOpen">
      <a
        routerLink=""
        class="nav-link"
        routerLinkActive="active"
        [routerLinkActiveOptions]="{ exact: true }"
      >
        <i class="fas fa-film"></i>
        <span>Películas</span>
      </a>

      <a routerLink="candy" class="nav-link" routerLinkActive="active">
        <i class="fas fa-candy-cane"></i>
        <span>Candy</span>
      </a>

      <a routerLink="cine-fan" class="nav-link" routerLinkActive="active">
        <i class="fas fa-star"></i>
        <span>Cine Fan</span>
      </a>

      <a routerLink="regala-cine" class="nav-link" routerLinkActive="active">
        <i class="fas fa-gift"></i>
        <span>Regalá Cine</span>
      </a>

      <a routerLink="store" class="nav-link" routerLinkActive="active">
        <i class="fas fa-shopping-bag"></i>
        <span>Store</span>
      </a>

      <a routerLink="elegi-pelicula" class="nav-link" routerLinkActive="active">
        <i class="fas fa-search"></i>
        <span>Elegí Película</span>
      </a>

      <a
        routerLink="pelirandom"
        class="nav-link peli-random-btn"
        routerLinkActive="active"
      >
        <div class="random-btn-content">
          <div class="random-icon-container">
            <i class="fas fa-dice"></i>
            <div class="sparkle sparkle-1"></div>
            <div class="sparkle sparkle-2"></div>
            <div class="sparkle sparkle-3"></div>
          </div>
          <span class="random-text">
            <span class="random-main">Peli</span>
            <span class="random-highlight">Random</span>
          </span>
        </div>
        <div class="random-btn-glow"></div>
      </a>
    </div>

    <!-- Sección derecha -->
    <div class="navbar-actions" [class.active]="mobileMenuOpen">
      <!-- Botón de Favoritos -->
      <button
        class="favorites-btn"
        (click)="toggleFavoritos()"
        [class.active]="favoritosAbierto"
        title="Mis Favoritos"
      >
        <i class="fas fa-star"></i>
        <span class="favorites-count" *ngIf="favoritosCount > 0">{{
          favoritosCount
        }}</span>
      </button>

      <!-- Icono de usuario con menú desplegable -->
      <ng-container *ngIf="isAuthenticated; else loginBlock">
        <div class="user-menu-container">
          <button class="user-btn" (click)="toggleUserMenu()" title="Mi Cuenta">
            <i class="fas fa-user"></i>
            <span class="user-name" *ngIf="user?.name">{{ user.name }}</span>
          </button>

          <!-- Menú desplegable de usuario -->
          <div class="user-dropdown" [class.show]="userMenuOpen">
            <div class="user-info">
              <div class="user-avatar">
                <i class="fas fa-user-circle"></i>
              </div>
              <div class="user-details">
                <h4 class="user-name-display">{{ user?.name || "Usuario" }}</h4>
                <p class="user-email">
                  {{ user?.email || "email@ejemplo.com" }}
                </p>
              </div>
            </div>

            <div class="user-menu-divider"></div>

            <div class="user-menu-items">
              <a class="user-menu-item" (click)="irAlPerfil()">
                <i class="fas fa-user-cog"></i>
                <span>Mi Perfil</span>
              </a>

              <a class="user-menu-item" (click)="toggleFavoritos()">
                <i class="fas fa-heart"></i>
                <span>Mis Favoritos</span>
                <span class="favorites-badge" *ngIf="favoritosCount > 0">{{
                  favoritosCount
                }}</span>
              </a>

              <a class="user-menu-item" routerLink="/compra-entradas">
                <i class="fas fa-ticket-alt"></i>
                <span>Mis Entradas</span>
              </a>

              <div class="user-menu-divider"></div>

              <a class="user-menu-item logout-item" (click)="logout()">
                <i class="fas fa-sign-out-alt"></i>
                <span>Cerrar Sesión</span>
              </a>
            </div>
          </div>
        </div>
      </ng-container>

      <ng-template #loginBlock>
        <button class="user-btn" (click)="login()" title="Iniciar Sesión">
          <i class="fas fa-user"></i>
        </button>
      </ng-template>
    </div>
  </div>

  <!-- Línea decorativa inferior -->
  <div class="navbar-bottom-line"></div>
</nav>
